
-- Creation of USER Table
CREATE TABLE USER_INFO (
    ID INT PRIMARY KEY,
    FName VARCHAR(15) NOT NULL,
    LName VARCHAR(15) NOT NULL,
    Email VARCHAR(30) NOT NULL UNIQUE,
    Password VARCHAR(30) NOT NULL CHECK(LENGTH(Password) > 8)
);

-- Creation of MEDIA Table
CREATE TABLE MEDIA (
    ID CHAR(15) PRIMARY KEY,
    Title VARCHAR(30) NOT NULL,
    Genre VARCHAR(15),
    Description VARCHAR(300)
);

-- Creation of BOOKS Table
CREATE TABLE BOOKS (
    ISBN CHAR(15),
    Author VARCHAR(20),
    Publisher VARCHAR(15),
    PRIMARY KEY (ISBN),
    FOREIGN KEY (ISBN) REFERENCES MEDIA(ID) ON DELETE CASCADE
);

-- Creation of MOVIES Table
CREATE TABLE MOVIES (
    MID CHAR(15),
    Director VARCHAR(15),
    Studio VARCHAR(15),
    PRIMARY KEY (MID),
    FOREIGN KEY (MID) REFERENCES MEDIA(ID) ON DELETE CASCADE
);

-- Creation of PREFERS Table
CREATE TABLE USER_PREFERENCES (
    UserID INT,
    MediaID CHAR(15),
    Rating INT CHECK (Rating BETWEEN 0 AND 5),
    Status INT CHECK (Status BETWEEN 0 AND 2),
    PRIMARY KEY (UserID, MediaID),
    FOREIGN KEY (UserID) REFERENCES USER(ID) ON DELETE CASCADE,
    FOREIGN KEY (MediaID) REFERENCES MEDIA(ID) ON DELETE CASCADE
);